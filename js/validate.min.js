$("#contact_body").submit(function(e){e.preventDefault();proceed=!0;$($(this).find("input[data-required=true], textarea[data-required=true]")).each(function(){if(!$.trim($(this).val())){$(this).css('border-color','red');proceed=!1}
var email_reg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if($(this).attr("type")=="email"&&!email_reg.test($.trim($(this).val()))){$(this).css('border-color','red');proceed=!1}}).on("input",function(){$(this).css('border-color',border_color)});if(proceed){var post_url=$(this).attr("action");var request_method=$(this).attr("method");var form_data=new FormData(this);$.ajax({url:post_url,type:request_method,data:form_data,dataType:"json",contentType:!1,cache:!1,processData:!1}).done(function(res){if(res.type=="error"){$("#contact_results").html('<div class="error">'+res.text+"</div>");$("#contact_results").attr('disabled','disabled')}
if(res.type=="done"){$("#contact_results").html('<div class="success">'+res.text+"</div>");$("#contact_results").attr('disabled','disabled')}})}})